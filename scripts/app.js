!function(t){function e(r){if(n[r])return n[r].exports;var o=n[r]={exports:{},id:r,loaded:!1};return t[r].call(o.exports,o,o.exports,e),o.loaded=!0,o.exports}var n={};return e.m=t,e.c=n,e.p="",e(0)}([function(t,e,n){"use strict";function r(){return["div",{className:"row-between-stretch",onLink:function(){console.log("-- linking root elem:",this)}},[l],[s]]}function o(t){t.preventDefault();var e=t.target.text.value.trim(),n=JSON.parse(e);(0,u.set)([],n)}function i(){console.log("-- linking:",this)}function a(){console.log("-- unlinking:",this)}n(1);var c=n(3),u=n(6);n(11),n(12);var l=(0,u.auto)(function(t,e){return["pre",{className:"flex-1 pad",onclick:function(){console.log("clicked:",this)},onLink:function(){console.log("-- linking state elem:",this)},onUnlink:function(){console.log("-- unlinking:",this)}},JSON.stringify(e(),null,2)]}),s=(0,u.auto)(function(t,e){return["div",{className:"flex-1"},["form",{className:"wide",onsubmit:o},["textarea",{name:"text",rows:16,className:"wide text-monospace",value:JSON.stringify(e(),null,2)}],["button",{type:"submit"},"Save"]]]});(0,c.renderTo)("[data-state]",r),(0,c.renderTo)("[data-unsafe]",function(){return["div",{innerHTML:"<strong>this is <em>potentially unsafe</em> HTML</strong>"}]}),(0,c.renderTo)("[data-safe]",function(){return["div",{textContent:"<strong>this is safe text content</strong>"}]}),(0,c.renderTo)("[data-iterable]",function(t,e){return["div",null,(e("iterable")||[]).map(function(t,e){return e?["p",{"data-key":t,onLink:i,onUnlink:a},t]:null})]})},function(t,e,n){(function(t){!function(){"use strict";function e(t,e){var n=this;this.href="",this.host="",this.hash="",this.pathname="",this.path="",this.protocol="",this.search="",this.isPush=!1,this.rafId=0,Object.keys(this).forEach(function(e){e in t&&(n[e]=t[e])}),this.path=this.protocol+"//"+this.host+this.pathname,t instanceof HTMLElement&&b.forEach(function(e){t.hasAttribute(e)&&(n[e]=t.getAttribute(e))}),e&&Object.keys(e).forEach(function(t){n[t]=e[t]})}function n(t){var e=location.protocol+"//"+location.host+location.pathname;if(!t.isPush||t.path!==e||t.search!==location.search||"data-force-reload"in t){if(!m){var n=m=new XMLHttpRequest;n.onload=function(){if(n.status<200||n.status>299)return void n.onerror(null);t.rafId&&cancelAnimationFrame(t.rafId),m=null;var e=i(n);if(!e)return void n.onerror(null);if(t.isPush){var r=n.responseURL&&n.responseURL!==t.path?n.responseURL:t.href;history.pushState(null,e.title,r),s()}var c="data-noscroll"in t,u=location.hash?location.hash.slice(1):null;!u&&t.isPush&&"data-scroll-to-id"in t&&(u=t["data-scroll-to-id"]||h.defaultMainId);var l=document.getElementById(u);l?(l.scrollIntoView(),p()):u||c||window.scrollTo(0,0),document.dispatchEvent(d("simple-pjax-before-transition")),a(e),o(),document.dispatchEvent(d("simple-pjax-after-transition")),l=document.getElementById(u),l?(l.scrollIntoView(),p()):c||window.scrollTo(0,0)},n.onabort=n.onerror=n.ontimeout=function(){m=null,t.isPush&&history.pushState(null,"",n.responseURL||t.href),location.reload()},n.open("GET",t.href),n.responseType="document",n.send(null),r(n)}}else if(t.href!==location.href&&(history.pushState(null,document.title,t.href),s()),t.hash){var c=document.querySelector(t.hash);c instanceof HTMLElement&&(c.scrollIntoView(),p())}}function r(t){h.loadIndicatorDelay>0&&!function(){var e=setTimeout(function(){return 4===t.readyState?void clearTimeout(e):void("function"==typeof h.onIndicateLoadStart&&h.onIndicateLoadStart())},h.loadIndicatorDelay)}()}function o(){h.loadIndicatorDelay>0&&"function"==typeof h.onIndicateLoadEnd&&h.onIndicateLoadEnd()}function i(t){var e=t.getResponseHeader("Content-Type")||"text/html";return/html/.test(e)?t.responseXML?t.responseXML:(new DOMParser).parseFromString(t.responseText,"text/html"):null}function a(t){document.title=t.title,[].slice.call(document.head.querySelectorAll("script")).forEach(function(t){t.parentNode.removeChild(t)}),c(t),document.body=t.body,[].slice.call(document.scripts).forEach(function(t){document.body.appendChild(u(t))})}function c(t){[].slice.call(t.scripts).forEach(function(t){t.src&&t.parentNode&&t.parentNode.removeChild(t)})}function u(t){var e=document.createElement("script");return l(t.textContent)||(t.type&&(e.type=t.type),e.textContent=t.textContent),e}function l(t){return/document\s*\.\s*(?:write|open)\s*\(/.test(t)}function s(){v=location.pathname,y=location.search}function f(){return location.pathname===v&&location.search===y}function d(t){var e=document.createEvent("Event");return e.initEvent(t,!0,!0),e}function p(){if(h.scrollOffsetSelector){var t=document.querySelector(h.scrollOffsetSelector),e=getComputedStyle(t);"fixed"===e.position&&"0px"===e.top&&window.scrollBy(0,-t.getBoundingClientRect().height)}}if("object"==typeof window&&window&&"function"==typeof history.pushState){var h={disabled:!1,loadIndicatorDelay:250,onIndicateLoadStart:function(){document.documentElement.style.transition="opacity linear 0.05s",document.documentElement.style.opacity="0.8"},onIndicateLoadEnd:function(){document.documentElement.style.transition="",document.documentElement.style.opacity=""},scrollOffsetSelector:"",defaultMainId:"",reload:function(){n(new e(location,{"data-noscroll":!0,"data-force-reload":!0}))}};"object"==typeof t&&null!==t&&"object"==typeof t.exports&&null!==t.exports?t.exports=h:window.simplePjax=h;var m=null,v="",y="";s();var b=["data-noscroll","data-force-reload","data-scroll-to-id"];document.addEventListener("click",function(t){if(!h.disabled){var r=t.target;do if(r instanceof HTMLAnchorElement)break;while(r=r.parentElement);r&&0===t.button&&(t.altKey||t.ctrlKey||t.metaKey||t.shiftKey||r.protocol+"//"+r.host===location.origin&&"_blank"!==r.target&&"_top"!==r.target&&(r.hasAttribute("data-no-pjax")||(r.pathname!==location.pathname||!r.hash||h.scrollOffsetSelector)&&(t.preventDefault(),n(new e(r,{isPush:!0})))))}}),window.addEventListener("popstate",function(t){if(!f()){s();var r=window.scrollX,o=window.scrollY,i=requestAnimationFrame(function(){window.scrollTo(r,o)});n(new e(location,{rafId:i}))}})}}()}).call(e,n(2)(t))},function(t,e){t.exports=function(t){return t.webpackPolyfill||(t.deprecate=function(){},t.paths=[],t.children=[],t.webpackPolyfill=1),t}},function(t,e,n){"use strict";function r(t,e){function n(){[].forEach.call(document.querySelectorAll(t),function(t){(0,i.renderAt)(t,r)})}var r=(0,a.auto)(e);o(n)}function o(t){/loaded|complete|interactive/.test(document.readyState)?t():document.addEventListener("DOMContentLoaded",function e(){document.removeEventListener("DOMContentLoaded",e),t()}),document.addEventListener("simple-pjax-after-transition",t)}Object.defineProperty(e,"__esModule",{value:!0}),e.renderTo=r,e.onload=o;var i=n(4),a=n(6);document.addEventListener("simple-pjax-before-transition",function(){(0,i.unlink)(document.body)})},function(t,e,n){"use strict";function r(t,e){var n={};for(var r in t)e.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(t,r)&&(n[r]=t[r]);return n}function o(t,e,n){return a(t,[e,n])}function i(t){var e=t.alderCell;e&&(e.units&&k(e.units,x),e.props&&"function"==typeof e.props.onUnlink&&e.props.onUnlink.call(t)),k(t.childNodes,i),t.alderCell=null}function a(t,e){function n(e,o){t=c(t,r,n,e,o)||t}var r=t&&t.alderCell&&t.alderCell.units||[];n(e,0);var o=t.alderCell||(t.alderCell=S());return o.units!==r&&(o.units=r),t}function c(t,e,n,r,o){if(t&&!t.parentNode)return"undefined"!=typeof console&&console.warn("Attempted render at parentless node. Have you accidentally called render twice? Draft:",r),i(t);if(!D(r))return k(e.splice(o),x),l(t,r);var a=r[0],c=Object.freeze(T({},r[1],{children:L(r)}));if(e[o]){if(C(e[o],a,c))return;k(e.splice(o),x)}var s={func:a,props:c,unsub:null};e.push(s),s.unsub=u(n,a,c,e,o)}function u(t,e,n,r,o){function i(i){I(i),A(r[o],e,n),t(i,o+1),a=!0}var a=!1,c=e(i,n);if(!a)throw Error("Expected the render function to be called");return c}function l(t,e){return t=d(t,e),e&&s(t,e),t}function s(t,e){if(t.alderCell||(t.alderCell=S()),R(e))return j(t),void(t.textContent!==e&&(t.textContent=e));var n=e[1],r=L(e);g(t,n),n&&("textContent"in n||"innerHTML"in n)||f(t,r)}function f(t,e){for(var n=-1;++n<e.length;){var r=M(e[n]),o=D(r)?a:l,c=o(t.childNodes[n],r);t.childNodes[n]||t.appendChild(c)}for(;t.childNodes[n];)i(t.childNodes[n]),t.removeChild(t.childNodes[n])}function d(t,e){var n=p(t,e);return n!==t&&(t&&m(t,n),b(n,e)),n}function p(t,e){return h(t,e)?e?R(e)?document.createElement("span"):document.createElement(e[0]):document.createComment("alder.placeholder"):t}function h(t,e){return e?t instanceof Element?R(e)?"SPAN"!==t.tagName:t.tagName!==e[0].toUpperCase():!0:!(t instanceof Comment)}function m(t,e){i(t),v(t,e),y(t,e)}function v(t,e){e.alderCell=t.alderCell,t.alderCell=null}function y(t,e){t.parentNode.insertBefore(e,t),t.parentNode.removeChild(t)}function b(t,e){e&&e[1]&&"function"==typeof e[1].onLink&&e[1].onLink.call(t)}function g(t,e){e=Object(e);var n=Object(t.alderCell.props),o=e,i=o.style,a=r(o,["style"]);if("style"in e)if("string"==typeof i)t.setAttribute("style",i);else{t.setAttribute("style","");for(var c in i)O(t.style,c,i[c])}for(var c in a)if("children"!==c){var u=a[c];w(c,u)?E(t,c,u):O(t,c,u)}for(var c in n)if(!(c in e||"children"===c)){var u=n[c];w(c,u)||"style"===c?t.removeAttribute(c):O(t,c,null)}t.alderCell.props=e}function w(t,e){return/^data-[\S]+$/.test(t)||/^aria-[\S]+$/.test(t)?!0:R(e)&&/^on[a-z]+$/i.test(t)}function E(t,e,n){return n===!1?t.removeAttribute(e):((n===!0||null==n)&&(n=""),void t.setAttribute(e,n))}function O(t,e,n){var r=t[e];n||(n="string"==typeof r?"":null),n!==r&&(t[e]=n)}function j(t){for(;t.attributes[0];)t.removeAttribute(t.attributes[0].name)}function A(t,e,n,r){if(!t||t.func!==e||t.props!==n)throw Error("Attempted render after component or props have changed.\nComponent:\n"+e+"\nProps:\n"+JSON.stringify(n))}function k(t,e){for(var n=-1;++n<t.length;)e(t[n],n)}function x(t){"function"==typeof t.unsub&&t.unsub.call(null)}function C(t,e,n){return t.func!==e?!1:t.func===e&&_(t.props,n)}function S(){return{units:null,props:null}}function L(t){return P(t.slice(2))}function P(t){var e=[];return k(t,function(t){q(t)?e.push.apply(e,P(t)):e.push(t)}),e}var T=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t};Object.defineProperty(e,"__esModule",{value:!0}),e.renderAt=o,e.unlink=i;var N=n(5),I=N.validateDraft,M=N.cast,D=N.isDynamic,R=N.isPrimitive,_=N.deepEqual,q=N.isArrayOfDrafts},function(t,e){"use strict";function n(t){if(!u(t)){if(t instanceof Array)return r(t);throw Error("Draft must be an array or a primitive value, got: "+t)}}function r(t){var e=t[0],n=t[1];if("string"!=typeof e&&"function"!=typeof e)throw Error("First draft value must be a string or a function, got: "+e);if("object"!==("undefined"==typeof n?"undefined":s(n))&&void 0!==n)throw Error("Second draft value must be null, undefined, or an object, got: "+n)}function o(t){return u(t)?t||0===t?String(t):null:t}function i(t){return t instanceof Array&&"function"==typeof t[0]}function a(t){return t instanceof Array&&"string"!=typeof t[0]&&t.every(c)}function c(t){return u(t)||t instanceof Array}function u(t){return null===t||"object"!==("undefined"==typeof t?"undefined":s(t))&&"function"!=typeof t}function l(t,e){if(t===e)return!0;if(u(t)||u(e))return!1;if(t instanceof Array!=e instanceof Array)return!1;if(t instanceof Array)return t.length!==e.length?!1:t.every(function(t,n){return l(t,e[n])});var n=Object.keys(t);return n.length!==Object.keys(e).length?!1:n.every(function(n){return n in e&&l(t[n],e[n])})}var s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol?"symbol":typeof t};Object.defineProperty(e,"__esModule",{value:!0}),e.validateDraft=n,e.cast=o,e.isDynamic=i,e.isArrayOfDrafts=a,e.isPrimitive=u,e.deepEqual=l},function(t,e,n){"use strict";function r(t){return function(e,n){return s(function(r){e(t(n,r))})}}Object.defineProperty(e,"__esModule",{value:!0}),e.watch=e.subscribe=e.patch=e.set=e.read=e.atom=void 0,e.auto=r;var o=n(7),i=e.atom=(0,o.createAtom)({stamp:null,key:null,persons:{},iterable:["one","two","three"]}),a=i.read,c=i.set,u=i.patch,l=i.subscribe,s=i.watch;e.read=a,e.set=c,e.patch=u,e.subscribe=l,e.watch=s,n(10),window.developmentMode&&(window.atom=i)},function(t,e,n){"use strict";var r=n(8);for(var o in r)e[o]=r[o];var i=n(9);for(var o in i)e[o]=i[o]},function(t,e){"use strict";function n(t,e){if(l(e))throw TypeError("path must be an array-like, got: "+e);if(!e.length)return t;for(var n=t,r=-1;++r<e.length;){if(l(n))return;var o=e[r];n=n[o]}return n}function r(t,e){var n=c(t,e);if(n!==h)return n;if(u(t,e))return t;var o={};return p(Object.keys(e),function(n){var i=r(t[n],e[n]);void 0!==i&&(o[n]=i)}),Object.freeze(o)}function o(t,e){var n=c(t,e);if(n!==h)return n;var r={};p(Object.keys(e),function(n){var i=o(t[n],e[n]);s(t[n],i)||(r[n]=i)});var i=Object.keys(r);if(i.length){var a=function(){var e={};return p(Object.keys(t),function(n){e[n]=t[n]}),p(i,function(t){void 0===r[t]?delete e[t]:e[t]=r[t]}),{v:Object.freeze(e)}}();if("object"==typeof a)return a.v}return t}function i(t,e,n){if(l(n))throw TypeError("path must be an array-like, got: "+n);if(!n.length)return r(t,e);var i={},a=i;return p(n,function(t,r){a=a[t]=r<n.length-1?{}:e}),m=e,o(t,i)}function a(t,e,n){if(l(n))throw TypeError("path must be an array-like, got: "+n);if(!n.length)return o(t,e);var r={},i=r;return p(n,function(t,r){i=i[t]=r<n.length-1?{}:e}),o(t,r)}function c(t,e){return t===e?t:l(t)?f(e):l(e)?e:t instanceof Array||e instanceof Array?u(t,e)?t:f(e):e===m?(m=h,r(t,e)):h}function u(t,e){if(s(t,e))return!0;if(l(t)||l(e))return!1;if("function"==typeof t&&"function"==typeof e)return t===e;if(t instanceof Array!=e instanceof Array)return!1;if(t instanceof Array&&e instanceof Array)return t.length!==e.length?!1:t.every(function(t,n){return u(t,e[n])});var n=Object.keys(t);return n.length!==Object.keys(e).length?!1:n.every(function(n){return n in e&&u(t[n],e[n])})}function l(t){return null==t||"object"!=typeof t&&"function"!=typeof t}function s(t,e){return t===e||t!==t&&e!==e}function f(t){if(l(t))return t;if(t instanceof Array)return Object.freeze(t.map(f));var e={};return p(Object.keys(t),function(n){void 0!==t[n]&&(e[n]=f(t[n]))}),Object.freeze(e)}function d(t){return l(t)||Object.isFrozen(t)?t:(t instanceof Array?p(t,d):p(Object.keys(t),function(e){d(t[e])}),Object.freeze(t))}function p(t,e){for(var n=-1;++n<t.length;)e(t[n],n)}var h="function"==typeof Symbol?Symbol():(Math.random()*Math.pow(10,16)).toString(16),m=h;e.readAtPath=n,e.replaceAtPath=i,e.mergeAtPath=a,e.deepEqual=u,e.immute=d},function(t,e,n){"use strict";function r(t){function e(){return l(h,arguments)}function n(){y=!0,m=h,h=v;try{b.forEach(u)}finally{y=!1,i(v,h)||n()}}function r(t,e){v=f(v,e,t),y||n()}function a(t,e){v=s(v,e,t),y||n()}function u(t){t(m,h)}function d(t){return u(t),b=b.concat(t),function(){b=c(b,t)}}function p(t){return d(o(t))}var h=f(void 0,t,[]),m=h,v=h,y=!1,b=[];return{read:e,set:r,patch:a,subscribe:d,watch:p}}function o(t){if("function"!=typeof t)throw Error("Expected a function, got: "+t);var e=void 0;return function(n,r){(!e||e.some(a(n,r)))&&(e=[],t(function(){return e.push(arguments),l(r,arguments)}))}}function i(t,e){return t===e||t!==t&&e!==e}function a(t,e){return function(n){return!i(l(t,n),l(e,n))}}function c(t,e){var n=t.indexOf(e);return~n&&(t=t.slice(),t.splice(n,1)),t}var u=n(8),l=u.readAtPath,s=u.mergeAtPath,f=u.replaceAtPath;e.createAtom=r,e.watcher=o},function(t,e,n){"use strict";function r(){(0,i.patch)(["persons",1],o({id:1},a[++c%a.length]))}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(6),a=[{name:"Atlanta",age:1e3},{name:"Kara",age:2e3},{name:"Moira",age:3e3}],c=-1;r(),setInterval(r,2e3),setInterval(function(){(0,i.set)(["stamp"],0|window.performance.now())},1e3),document.addEventListener("keypress",function(t){(0,i.set)(["key"],t.keyCode)})},function(t,e,n){"use strict";function r(t){for(var e=arguments.length,n=Array(e>1?e-1:0),r=1;e>r;r++)n[r-1]=arguments[r];return{value:t.apply(void 0,n),oninput:function(t){var e=t.target.value;(0,i.set)(n,e)}}}var o=Object.assign||function(t){for(var e=1;e<arguments.length;e++){var n=arguments[e];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(t[r]=n[r])}return t},i=n(6),a=n(3);(0,a.renderTo)("[data-input]",function(t,e){return["div",{className:"col-start-stretch space-out"},["p",{className:"pad text-blue shadow"},e("text")],["input",o({type:"text",placeholder:"type something..."},r(e,"text"))]]})},function(t,e,n){"use strict";function r(){return["div",null,[c,{id:1}],[u,{id:1}]]}var o=n(3),i=n(6);n(11);var a=n(13);(0,o.renderTo)("[data-stamp]",function(t,e){return a.React.createElement("div",null,a.React.createElement("p",null,"ms elapsed since page load: ",e("stamp")))}),(0,o.renderTo)("[data-key]",function(t,e){return a.React.createElement("div",null,a.React.createElement("p",null,"last pressed key's code: ",e("key")))});var c=(0,i.auto)(function(t,e){return a.React.createElement("p",null,"name: ",e("persons",t.id,"name"))}),u=(0,i.auto)(function(t,e){return a.React.createElement("p",null,"age: ",e("persons",t.id,"age"))});(0,o.renderTo)("[data-person]",r)},function(t,e,n){e.React=n(14).React},function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0});e.React={createElement:function(t,e){for(var n=arguments.length,r=Array(n>2?n-2:0),o=2;n>o;o++)r[o-2]=arguments[o];return[t,e].concat(r)}}}]);